---
title: iPhoneのSiriショートカットで時間帯によって再生する音楽プレイリストを変える
author: なっかあ
type: post
date: 2018-09-26T12:59:45+00:00
url: /ios12-siri-shortcut-music-playlist/
categories:
  - iPhone
tags:
  - iOS12
  - Siriショートカット

---

iPhoneで時間帯によって再生するプレイリストを変えたいなと思いました。  

いちいちミュージックアプリを開いて、プレイリストを選択するのは手間です。  
Siriに「曲を流して」というと、朝はゆったりした曲のプレイリストを流し、夕方はテンポ早めな曲を流してくれるようにして欲しい。  

そこで、そういう動作をしてくれるSiriショートカットを作ってみました。
(だいぶ無理やりな方法なので、賢いやり方をご存知の方は教えてください。)

## レシピ公開します (2019年9月12日追記)

このショートカットのレシピを公開しました。  
以下のリンクよりご確認ください。（記事を書いてから色々いじったので、異なる部分が多いかもしれません。）

[時間帯による音楽再生](https://www.icloud.com/shortcuts/92d546e0e6264ff2ac0f67114b5a0740)

## 作業手順
大まかな作業手順は以下の通りです。

1. プレイリストを再生するショートカットを作る
2. 時間帯によって再生するプレイリストを変えるショートカットを作る

## プレイリストを再生するショートカットを作成

この作業は、再生したいプレイリストの数だけ行う必要があります。
  
例えば、朝と昼と夜の３つ時間帯で別々のプレイリストを再生したい場合は、3つのショートカットを作成します。

* Siriショートカットのライブラリを開く。
* 必須ソフトウェアにある「プレイリストを再生」を選択する。
* ガイドに従って登録する。

作成したショートカットは、名前を変えた方がわかりやすいです。変更方法は以下の記事に書きました。
  
[Siriショートカットの名前を変更する](/ios12-siri-shortcut-name-change/)

## 時間帯によって再生するプレイリストを変えるショートカットを作る

時間帯によって再生するプレイリストを変えるショートカットを作ります。

ただ、残念ながら現状のSiriショートカットでは、時間帯を指定することができないようです。  

しかし、ショートカットを実行した時間と指定した時間の時間差は取れることに気づきました。  

例えば、ショートカットを実行した時間が16時で、指定した時間が18時だった場合は、時間差として2という値が取得できます。  

ですので、ある基準時間を決めその時間から何時間前/後かを取得し、その値を使ってどのプレイリストを再生するか振り分けています。
  
私はこれを平日の午前2時に閃いてしまい、睡眠時間を削ってショートカットを作りました。

今回は、朝(6時〜9時)、昼(9時〜18時)、夕(18時〜21時)、夜(21時〜翌6時)の4つの時間帯で別々のプレイリストを再生するようにしました。
  
基準時間は18時にしています。よって、以下のように条件を作りました。

1. 基準時間からの時間差が-3以下ならば、夜
2. もし、上記を満たさず、基準時間からの時間差が0以下ならば、夕
3. もし、上記を満たさず、基準時間からの時間差が9以下ならば、昼
4. もし、上記を満たさず、基準時間からの時間差が12以下ならば、朝
5. もし、上記を満たさない場合は、夜

これをSiriショートカットで作ります。

### 基準時間を設定し時間差を取得する

まずはじめに、「日時」アクションを使います。「指定日」をタップし、日時を「18:00」にします。
  
次に「日付間の時間を取得」アクションを使います。「今すぐ」をタップし、単位は「時間」を選択します。

![image](/img/wp/20180926-siris-music-5-320x569.png)

### 時間帯で処理を振り分ける

1の夜の時の処理を作ります。  
「次の場合」アクションを使います。入力を「より小さい」、数字を「-3」にします。  
すぐ下に「ショートカットを実行」アクションを持ってきて、先ほど作成したプレイリストを再生するショートカットを指定します。

![image](/img/wp/20180926-siris-music-6-320x569.png)

2の夕方の時の処理を作ります。
  
わかりづらいですが、「その他の場合」の下に「ショートカットを実行」アクションをおきます。数字は「1」にしています。
  
![image](/img/wp/20180926-siris-music-7-320x569.png)

3と4の処理も2と同じように作ります。

5の夜の時の処理は、4の「次の場合」アクションの「その他の場合」に入れてください。

![image](/img/wp/20180926-siris-music-9-320x479.png)

これで完成です。
  
あとはSiriに登録するなり、ホーム画面に登録するなりお好きなように使ってください。

## あとがき

Siriショートカット便利。iOS12に上げるまでは見向きもしていなかった機能だったのですが、今では一番使う機能になりました。
  
前々から、iPhoneで時間帯によって再生する曲を変えたいと思っていたので実現できて満足です。
  
ではでは。