+++ 
date = 2020-04-23T23:32:07+09:00
title = "8年間お世話になったWordPressからHugoへ移行した"
description = "WordPressからHugoへ移行したので、移行に伴う変更点、移行した理由、移行時の作業内容、移行後のメリットデメリットの4点について書こうと思います。"
url = "migrate-from-wp-to-hugo" 
tags = ["Hugo"]
categories = ["Blog"]
+++

このサイトをWordPressから[Hugo](https://gohugo.io)へ移行しました。  
この記事では移行に伴う変更点、移行した理由、移行時の作業内容、移行後のメリットデメリットの4点について書こうと思います。


# 移行に伴う変更点
記事のURLは変わりませんが、いくつか変更点があります。  

## RSS URLの変更
Feedly等のRSSリーダでこのブログを購読されている方は変更をお願いします。  
変更後のURL: https://7ka.org/index.xml

## アクセスが少ない記事の削除
移行に伴い需要が少ないと思われる記事は削除しました。  
具体的には2020年1〜3月のアクセス数の合計が30以下の記事は削除しました。  
(移行前は100記事あったのですが、70記事近く削除しました。)

## AMPページと検索機能の廃止
一部の記事ではAMPに対応していましたが移行に伴い廃止となりました。  
キーワード検索機能もなくなりました。今後復活するかは検討中です。

# 移行した理由
一言で書くとWordPressじゃなくても十分だと気づいたからです。  
  
インターネットに触れたばかりの8年前は、ブラウザで記事を書けるWordPressは魅力的でした。  
時が経ち、CLIに触れる機会が増え、GitやMarkDown記法を覚えるとブラウザで記事を書ける必要性を感じなくなりました。  
それでも惰性で続けていたのですが、WordPress 5.0から導入された新エディタ [Gutenberg](https://ja.wordpress.org/gutenberg/) に適応できませんでした。  
視覚的でわかりやすかったですが、私は素のmarkdownで書きたかったです。  
  
WordPressはバックアップも手間がかかりました。定期的にレンタルサーバの管理画面でMySQLのデータベースをダンプし、wp-content配下の画像ファイルを落としていました。  
記事も画像もGitで管理しGitHubに上げればバックアップも兼ねられるのにという思いが強まり、ついに重い腰を上げました。  

# 移行時の作業内容
泥臭いですが記事と画像データのエクスポート以外は手動で対応しました。  

## 記事のエクスポート
エクスポートは以下のツールをサーバ上で実行しました。  
WordPressの管理画面からでも実行できるのですが、私の場合は大量の画像データがあるためかTimeoutが発生しうまく動きませんでした。

[SchumacherFM/wordpress-to-hugo-exporter](https://github.com/SchumacherFM/wordpress-to-hugo-exporter)

上記以外にもいくつか移行用のツールは公開されています。詳しくは [Migrate to Hugo | Hugo](https://gohugo.io/tools/migrations/#wordpress) へ。

## エクスポート後の作業
記事と画像データをGitで管理し始めました。  
画像のパス修正や不要なファイルの削除を地道にやっていました。当初は画像と記事のファイルサイズが1GBほどあったのですが、1MBになりました。  
記事中の日本語が変だった部分を書き直しましたり、賞味期限切れ(古くて需要がない)記事を消したりしていたので、この作業には3日ほどかかりました。  

## 公開用サーバ準備
Gitでpushすれば公開されるようにNetlifyの設定も行いました。  

# 移行したメリットとデメリット

## デメリット

* 編集作業は基本的にPCでする必要がある
* WordPressと比べて日本語情報が少ない
* デフォルト装備の機能が少ない(検索やツイート埋め込みなどは自作が必要)

## メリット

* サーバ管理や脆弱性対応が不要
* 静的サイトなので表示が早い
* サーバ不要なため維持費が安く済む

# あとがき

ページの表示が早くなり、記事をmarkdownで書けるようになり、煩わしいWordPressのアップデート作業をしなくなり幸せいっぱいです。
使い慣れたWordPressを離れるのは不安も大きかったですが、移行してみるとこれはこれでしっくり来ますね。  
小規模な個人ブログならHugoを使うのもアリだなと感じます。  

